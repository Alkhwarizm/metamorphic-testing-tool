#!/usr/bin/env node
const argv = require('yargs')
    .usage('Usage: $0 <command> [options]')
    .command('run', 'Run metamorphic tests in the directory.')
    .example('$0 run -d tests', 'Run all metamorphic tests in /tests directory.')
    .alias('d', 'directory')
    .nargs('d', 1)
    .describe('d', 'Load a directory')
    .default('d', 'tests')
    .example('$0 run -f test.js', 'Run a metamorphic tests defined in test.js.')
    .alias('f', 'file')
    .nargs('f', 1)
    .describe('f', 'Load a file')
    .help('h')
    .alias('h', 'help')
    .argv;

const fs = require('fs');
const path = require('path');

if (argv.f) {
    const filepath = path.join(process.cwd(), argv.f);
    require(filepath);
} else {
    const filepaths = fs.readdirSync(argv.d).map(file => {
        return path.join(process.cwd(), argv.d, file);
    });

    filepaths.forEach(file => {
        require(file)
    })
}
